{"mappings":"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","sources":["src/utils.js","src/app.js"],"sourcesContent":["export const findLongestWord = (dictionary, randomStr) => {\r\n  // create characters map that contains number of occurences for each character from the random string\r\n  const charactersMap = randomStr\r\n    .toLowerCase()\r\n    .split(\"\")\r\n    .reduce((allCharacters, currentCharacter) => {\r\n      const currentCount = allCharacters[currentCharacter] ?? 0;\r\n      return { ...allCharacters, [currentCharacter]: currentCount + 1 };\r\n    }, {});\r\n\r\n  return dictionary\r\n    .filter(\r\n      (word) =>\r\n        [...word].every((character) => charactersMap[character]--) && word\r\n    )\r\n    .sort((a, b) => b.length - a.length);\r\n};\r\n\r\n// fetch json\r\nexport const getDictionary = async (url) => {\r\n  try {\r\n    document.querySelector(\"main\").style.display = \"none\";\r\n    const loading = document.createElement(\"div\");\r\n    loading.classList.add(\"loading\");\r\n    loading.innerHTML = `<h1>Учитавам речник...</h1>`;\r\n    document.body.appendChild(loading);\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n/**\r\n * Get characters from all input fields.\r\n * @param {object} obj = node list.\r\n * @returns {string}\r\n */\r\nexport const getChars = (obj) => {\r\n  return [...obj].reduce(\r\n    (acc, curr) => (curr.value ? acc + curr.value : acc),\r\n    \"\"\r\n  );\r\n};\r\n\r\nexport const generateRandomChar = (dictionary) => {\r\n  return dictionary[Math.floor(Math.random() * dictionary.length)];\r\n};\r\n\r\nexport const getLastInputElementIndex = (inputs) => {\r\n  return [...inputs].findLastIndex((input) => input.value);\r\n};\r\n","import {\r\n  findLongestWord,\r\n  generateRandomChar,\r\n  getChars,\r\n  getDictionary,\r\n  getLastInputElementIndex,\r\n} from \"./utils\";\r\n\r\n(async function () {\r\n  // ---------- VARIABLES ----------\r\n  const inputCharacters = document.querySelectorAll(\".char\");\r\n  const solution = document.querySelector(\".solution\");\r\n  const otherSolutionsList = document.querySelector(\".other-solutions\");\r\n  const btnSearch = document.querySelector(\".btn-search\");\r\n  const btnReset = document.querySelector(\".btn-reset\");\r\n  const btnRandom = document.querySelector(\".btn-random\");\r\n\r\n  const data = await getDictionary(\r\n    \"https://raw.githubusercontent.com/bbtools-ps/slagalica/main/dict/sr-rs.json\"\r\n  );\r\n\r\n  const dictionary = data?.words.split(\" \");\r\n\r\n  if (!dictionary?.length) {\r\n    document.body.innerHTML = `<div class=\"loading\"><h1>Грешка приликом учитавања речника!</h1></div>`;\r\n    return;\r\n  }\r\n\r\n  document.body.removeChild(document.querySelector(\".loading\"));\r\n  document.querySelector(\"main\").style.display = \"block\";\r\n\r\n  // ---------- EVENT LISTENERS ----------\r\n  inputCharacters.forEach((item) =>\r\n    item.addEventListener(\"input\", function (e) {\r\n      this.value = e.target.value.replace(/\\d+/g, \"\");\r\n      let lastElementIndex = getLastInputElementIndex(inputCharacters);\r\n      inputCharacters[\r\n        lastElementIndex !== inputCharacters.length - 1 &&\r\n        lastElementIndex !== -1\r\n          ? lastElementIndex + 1\r\n          : lastElementIndex !== -1\r\n          ? inputCharacters.length - 1\r\n          : 0\r\n      ].focus();\r\n    })\r\n  );\r\n\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Backspace\") {\r\n      let lastElementIndex = getLastInputElementIndex(inputCharacters);\r\n      lastElementIndex = lastElementIndex !== -1 ? lastElementIndex : 0;\r\n      inputCharacters[lastElementIndex].value = \"\";\r\n      inputCharacters[lastElementIndex].focus();\r\n    }\r\n  });\r\n\r\n  btnRandom.addEventListener(\"click\", () => {\r\n    const dictionary = \"абвгдђежзијклљмнњопрстћуфхцчџш\";\r\n    inputCharacters.forEach((char) => {\r\n      char.value = generateRandomChar(dictionary);\r\n    });\r\n  });\r\n\r\n  btnReset.addEventListener(\"click\", () => {\r\n    inputCharacters.forEach((char) => {\r\n      char.value = \"\";\r\n    });\r\n    solution.value = \"\";\r\n    otherSolutionsList.classList.remove(\"active\");\r\n  });\r\n\r\n  btnSearch.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    const randomString = getChars(inputCharacters);\r\n    const results = findLongestWord(dictionary, randomString);\r\n\r\n    if (!results.length) {\r\n      solution.value = \"\";\r\n      otherSolutionsList.classList.remove(\"active\");\r\n      alert(\"Нема такве речи у речнику.\");\r\n      return;\r\n    }\r\n\r\n    solution.value = results[0];\r\n\r\n    const otherSolutions = [...results]\r\n      .splice(1, 5)\r\n      .reduce(\r\n        (allSolutions, solution) => allSolutions + `<li>${solution}</li>`,\r\n        \"\"\r\n      );\r\n\r\n    otherSolutionsList.classList.add(\"active\");\r\n    otherSolutionsList.querySelector(\"ul\").innerHTML = otherSolutions;\r\n  });\r\n})();\r\n"],"names":["$6531107febf5e71a$export$32bc6f7cf859b3c2","dictionary","randomStr","charactersMap","toLowerCase","split","reduce","allCharacters","currentCharacter","currentCount","filter","word","every","character","sort","a","b","length","$6531107febf5e71a$export$475a61335fef548c","async","url","document","querySelector","style","display","loading","createElement","classList","add","innerHTML","body","appendChild","response","fetch","json","error","console","log","$6531107febf5e71a$export$6fefcd12824469d6","Math","floor","random","$6531107febf5e71a$export$34924e35dfb3a0a9","inputs","findLastIndex","input","value","inputCharacters","querySelectorAll","solution","otherSolutionsList","btnSearch","btnReset","btnRandom","words","removeChild","forEach","item","addEventListener","e","this","target","replace","lastElementIndex","focus","key","char","remove","preventDefault","randomString","obj","acc","curr","results","alert","otherSolutions","splice","allSolutions"],"version":3,"file":"index.6d105ed0.js.map"}